{"ast":null,"code":"export default {\n  name: 'MyNavigation',\n  data() {\n    return {\n      isLoggedIn: '',\n      activeIndex: ''\n    };\n  },\n  computed: {\n    computedActiveIndex: function () {\n      const routes = {\n        '/': '1',\n        '/tag': '2',\n        '/log': '3',\n        '/lmessage': '4',\n        '/write': '5'\n      };\n      return routes[this.$route.path];\n    }\n  },\n  created() {\n    this.checkLogged().then(() => {\n      this.activeIndex = this.computedActiveIndex;\n    });\n  },\n  methods: {\n    async checkLogged() {\n      try {\n        const response = await this.$http.get('/check');\n        if (response.data.code == 0) {\n          this.isLoggedIn = true;\n        } else {\n          this.isLoggedIn = false;\n        }\n      } catch (error) {\n        this.$message.error('查询登录状态失败：' + error);\n        this.isLoggedIn = false;\n      }\n    },\n    logOut() {\n      this.$http.get('/logout').then(response => {\n        console.log(response);\n        if (response.data.code == 0) {\n          this.$message.success('退出成功！');\n          this.checkLogged();\n        } else {\n          this.$message.error('退出失败：' + response.data.msg);\n        }\n      }).catch(error => {\n        this.$message.error('退出失败：' + error);\n      });\n    }\n  }\n};","map":{"version":3,"names":["name","data","isLoggedIn","activeIndex","computed","computedActiveIndex","routes","$route","path","created","checkLogged","then","methods","response","$http","get","code","error","$message","logOut","console","log","success","msg","catch"],"sources":["src/components/Navigation.vue"],"sourcesContent":["<template>\n    <el-container>\n        <el-header style=\"position: fixed; top: 0; left: 0; width: 100%; z-index: 1000; background-color: white; box-shadow: 0 2px 12px rgba(0, 0, 0, 0.1);\">\n            <el-menu :default-active=\"activeIndex\" class=\"el-menu-demo\" mode=\"horizontal\" style=\"width: 100%;\">\n                <el-menu-item index=\"1\" style=\"margin-left: 13%;\"><router-link to=\"/\"><el-link>首页</el-link></router-link></el-menu-item>\n                <el-menu-item index=\"2\"><router-link to=\"/tag\"><el-link>标签</el-link></router-link></el-menu-item>\n                <el-menu-item index=\"3\"><router-link to=\"/log\"><el-link>日志</el-link></router-link></el-menu-item>\n                <el-menu-item index=\"4\"><router-link to=\"/lmessage\"><el-link>留言板</el-link></router-link></el-menu-item>\n                <el-menu-item index=\"5\"><router-link to=\"/write\" @click.><el-link icon=\"el-icon-edit\">写文章</el-link></router-link></el-menu-item>\n                <div style=\"text-align: right; margin-top: 10px; margin-right: 20px;\">\n                    <template v-if=\"!isLoggedIn\">\n                        <router-link to=\"/login\" tag=\"span\"><el-link :underline=\"false\">登录</el-link></router-link>\n                        <router-link to=\"/signup\" tag=\"span\"><el-link :underline=\"false\" style=\"margin-left: 10px;\">注册</el-link></router-link>\n                    </template>\n                    <template v-else>\n                        <el-dropdown>\n                            <span class=\"el-dropdown-link\"><el-avatar icon=\"el-icon-user-solid\"></el-avatar></span>\n                            <el-dropdown-menu slot=\"dropdown\">\n                                <el-dropdown-item @click.native=\"logOut()\">退出登录</el-dropdown-item>\n                            </el-dropdown-menu>\n                        </el-dropdown>\n                    </template>\n                </div>\n            </el-menu>\n        </el-header>\n    </el-container>\n</template>\n\n<script>\nexport default {\n    name: 'MyNavigation',\n    data() {\n        return {\n            isLoggedIn: '',\n            activeIndex: ''\n        };\n    },\n    computed: {\n        computedActiveIndex: function() {\n            const routes = {\n                '/': '1',\n                '/tag': '2',\n                '/log': '3',\n                '/lmessage': '4',\n                '/write': '5'\n            };\n            return routes[this.$route.path];\n        }\n    },\n    created() {\n        this.checkLogged().then(() => {\n            this.activeIndex = this.computedActiveIndex;\n        });\n    },\n    methods: {\n        async checkLogged() {\n            try {\n                const response = await this.$http.get('/check');\n                if (response.data.code == 0) {\n                    this.isLoggedIn = true;\n                } else {\n                    this.isLoggedIn = false;\n                }\n            } catch (error) {\n                this.$message.error('查询登录状态失败：' + error);\n                this.isLoggedIn = false;\n            }\n        },\n        logOut() {\n            this.$http.get('/logout')\n                .then(response => {\n                    console.log(response);\n                    if (response.data.code == 0) {\n                        this.$message.success('退出成功！');\n                        this.checkLogged();                        \n                    } else {\n                        this.$message.error('退出失败：' + response.data.msg);\n                    }\n                })\n                .catch(error => {\n                    this.$message.error('退出失败：' + error);\n                });\n        }\n    }\n}\n</script>\n\n<style>\n</style>"],"mappings":"AA6BA;EACAA,IAAA;EACAC,KAAA;IACA;MACAC,UAAA;MACAC,WAAA;IACA;EACA;EACAC,QAAA;IACAC,mBAAA,WAAAA,CAAA;MACA,MAAAC,MAAA;QACA;QACA;QACA;QACA;QACA;MACA;MACA,OAAAA,MAAA,MAAAC,MAAA,CAAAC,IAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,WAAA,GAAAC,IAAA;MACA,KAAAR,WAAA,QAAAE,mBAAA;IACA;EACA;EACAO,OAAA;IACA,MAAAF,YAAA;MACA;QACA,MAAAG,QAAA,cAAAC,KAAA,CAAAC,GAAA;QACA,IAAAF,QAAA,CAAAZ,IAAA,CAAAe,IAAA;UACA,KAAAd,UAAA;QACA;UACA,KAAAA,UAAA;QACA;MACA,SAAAe,KAAA;QACA,KAAAC,QAAA,CAAAD,KAAA,eAAAA,KAAA;QACA,KAAAf,UAAA;MACA;IACA;IACAiB,OAAA;MACA,KAAAL,KAAA,CAAAC,GAAA,YACAJ,IAAA,CAAAE,QAAA;QACAO,OAAA,CAAAC,GAAA,CAAAR,QAAA;QACA,IAAAA,QAAA,CAAAZ,IAAA,CAAAe,IAAA;UACA,KAAAE,QAAA,CAAAI,OAAA;UACA,KAAAZ,WAAA;QACA;UACA,KAAAQ,QAAA,CAAAD,KAAA,WAAAJ,QAAA,CAAAZ,IAAA,CAAAsB,GAAA;QACA;MACA,GACAC,KAAA,CAAAP,KAAA;QACA,KAAAC,QAAA,CAAAD,KAAA,WAAAA,KAAA;MACA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}